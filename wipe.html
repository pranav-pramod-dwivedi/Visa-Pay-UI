<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>NovaPay | Protocol Zero</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&family=JetBrains+Mono:wght@500&display=swap');
        
        :root {
            --visa-blue: #0052FF;
            --danger-red: #FF0000;
            --surface: #FFFFFF;
        }

        body {
            font-family: 'Plus Jakarta Sans', sans-serif;
            background-color: var(--surface);
            color: #0F172A;
            margin: 0;
            padding: 0;
            min-height: 100vh;
            overflow-x: hidden;
            -webkit-tap-highlight-color: transparent;
        }

        body.lock-scroll { overflow: hidden; }

        /* --- SKELETON --- */
        .skeleton-block { background: #f1f5f9; position: relative; overflow: hidden; border-radius: 8px; }
        .skeleton-block::after { content: ""; position: absolute; inset: 0; background: linear-gradient(90deg, transparent, rgba(255,255,255,0.8), transparent); animation: shimmer 0.8s infinite linear; }
        @keyframes shimmer { 0% { transform: translateX(-100%); } 100% { transform: translateX(100%); } }
        
        #skeleton-screen { 
            position: fixed; inset: 0; background: white; z-index: 2000; 
            transition: opacity 0.5s ease; padding: 24px;
            display: flex; flex-direction: column; align-items: stretch;
        }
        .loaded #skeleton-screen { opacity: 0; pointer-events: none; }

        /* --- TERMINAL LAYER --- */
        #terminal-layer {
            position: fixed; inset: 0; z-index: 3000; background: #000;
            display: none; flex-direction: column; padding: 25px;
            color: var(--danger-red); font-family: 'JetBrains Mono', monospace;
            overflow: hidden;
        }

        .crt-overlay {
            position: absolute; inset: 0; pointer-events: none;
            background: linear-gradient(rgba(18, 16, 16, 0) 50%, rgba(0, 0, 0, 0.25) 50%), 
                        linear-gradient(90deg, rgba(255, 0, 0, 0.05), rgba(0, 255, 0, 0.02), rgba(0, 0, 255, 0.05));
            background-size: 100% 3px, 2px 100%; z-index: 3001;
        }

        .terminal-text { font-size: 11px; line-height: 1.4; margin-bottom: 4px; word-break: break-all; }
        .critical-line { background: #ff0000; color: #000; font-weight: 900; padding: 0 4px; animation: blink 0.2s infinite; }
        @keyframes blink { 0%, 100% { opacity: 1; } 50% { opacity: 0; } }

        /* --- ALARM STATE --- */
        #alarm-layer {
            position: fixed; inset: 0; z-index: 4000; background: #ff0000;
            display: none; flex-direction: column; align-items: center; justify-content: center;
            color: white; font-weight: 900; text-align: center;
            animation: flash-red-white 0.15s infinite;
        }
        @keyframes flash-red-white {
            0%, 100% { background: #ff0000; color: white; }
            50% { background: #ffffff; color: #ff0000; }
        }
        .alarm-text { font-size: 4.5rem; line-height: 0.8; letter-spacing: -4px; text-transform: uppercase; }

        /* --- OVERLAYS --- */
        .overlay-base {
            position: fixed; inset: 0; z-index: 1000; background: rgba(0, 0, 0, 0.75);
            backdrop-filter: blur(0px); display: none; flex-direction: column; align-items: center; justify-content: center;
            transition: all 0.5s cubic-bezier(0.16, 1, 0.3, 1);
        }
        .overlay-base.active { backdrop-filter: blur(50px); }
        .confirm-card { background: white; width: 92%; max-width: 400px; padding: 45px 30px; border-radius: 48px; text-align: center; }
        
        .yn-btn {
            width: 85px; height: 85px; border-radius: 50%; display: flex; align-items: center; justify-content: center;
            font-size: 2rem; font-weight: 900; color: white; transition: 0.2s;
        }
        .btn-y { background: #16a34a; box-shadow: 0 10px 40px rgba(22, 163, 74, 0.4); }
        .btn-n { background: #dc2626; box-shadow: 0 10px 40px rgba(220, 38, 38, 0.4); }

        .key-btn {
            width: 72px; height: 72px; border-radius: 50%; display: flex; align-items: center; justify-content: center;
            font-size: 1.5rem; font-weight: 700; background: #fff; border: 1px solid #f1f5f9; transition: 0.2s;
        }
        .key-btn:active { transform: scale(0.85); background: #ff0000; color: white; }
        .pass-dot { width: 14px; height: 14px; border-radius: 50%; border: 2px solid #e2e8f0; transition: 0.3s; }
        .pass-dot.filled { background: #ff0000; transform: scale(1.3); }
    </style>
</head>
<body class="bg-white">

    <!-- 1. TERMINAL LAYER -->
    <div id="terminal-layer">
        <div class="crt-overlay"></div>
        <div id="cli-output" class="flex flex-col h-full overflow-hidden"></div>
    </div>

    <!-- 2. ALARM LAYER -->
    <div id="alarm-layer">
        <div class="alarm-text">THEFT ALERT<br>THEFT ALERT<br>THEFT ALERT</div>
        <p class="mt-8 text-sm font-bold uppercase tracking-[0.3em]">Device Lockdown: Level 5 Breach</p>
        <button onclick="location.reload()" class="mt-12 bg-black text-white px-10 py-4 rounded-full font-black text-xs tracking-widest uppercase">Emergency Exit</button>
    </div>

    <!-- 3. Skeleton -->
    <div id="skeleton-screen">
        <div class="w-10 h-10 rounded-full skeleton-block mb-10"></div>
        <div class="h-64 w-full rounded-[3.5rem] skeleton-block mb-10"></div>
        <div class="space-y-6">
            <div class="h-32 w-full rounded-3xl skeleton-block"></div>
            <div class="h-40 w-full rounded-3xl skeleton-block"></div>
            <div class="h-40 w-full rounded-3xl skeleton-block"></div>
        </div>
    </div>

    <!-- 4. Main Content -->
    <div id="main-content" class="w-full">
        <header class="px-6 pt-12 pb-4 flex justify-between items-center sticky top-0 bg-white/95 backdrop-blur-md z-50">
            <a href="security.html" class="w-10 h-10 rounded-full bg-slate-50 flex items-center justify-center border border-slate-100 active:scale-90 transition-transform">
                <i class="fa-solid fa-chevron-left text-[14px]"></i>
            </a>
            <h1 class="text-[13px] font-extrabold text-slate-900 tracking-tight uppercase">Protocol Zero</h1>
            <div class="w-10"></div>
        </header>

        <section class="px-6 space-y-8 pt-2 pb-32">
            <!-- Hero Card -->
            <div class="bg-red-50 rounded-[3.5rem] p-10 flex flex-col items-center justify-center text-center border border-red-100 shadow-inner">
                <div class="w-24 h-24 bg-red-600 rounded-full flex items-center justify-center text-white text-4xl mb-8 shadow-2xl shadow-red-200">
                    <i class="fa-solid fa-radiation animate-pulse"></i>
                </div>
                <h2 class="text-2xl font-black text-red-600 mb-2 tracking-tight">System Termination</h2>
                <p class="text-[11px] text-red-400 font-bold uppercase tracking-widest leading-relaxed">
                    Account Destruction Sequence
                </p>
            </div>

            <!-- Detailed Technical Blocks to fill screen -->
            <div class="space-y-6">
                <!-- Block 1: The Standard -->
                <div class="space-y-4">
                    <h3 class="text-[10px] font-extrabold text-slate-400 uppercase tracking-widest px-2">Wipe Standards</h3>
                    <div class="bg-white rounded-[2.5rem] border border-slate-100 p-8 shadow-sm">
                        <div class="flex items-center justify-between mb-4">
                            <span class="text-[11px] font-extrabold text-slate-400 uppercase tracking-tighter">Compliance:</span>
                            <span class="text-[11px] font-black text-red-600 uppercase">DOD 5220.22-M</span>
                        </div>
                        <p class="text-[13px] font-medium text-slate-500 leading-relaxed">
                            NovaPay executes a triple-pass overwrite. Every bit of your account—including transaction histories and biometric templates—is replaced with random thermal noise, then zeroes, and verified for 0% data recovery.
                        </p>
                    </div>
                </div>

                <!-- Block 2: Infrastructure Registry -->
                <div class="space-y-4">
                    <h3 class="text-[10px] font-extrabold text-slate-400 uppercase tracking-widest px-2">Affected Infrastructure</h3>
                    <div class="bg-white rounded-[2.5rem] border border-slate-100 overflow-hidden shadow-sm">
                        <div class="p-5 border-b border-slate-50 flex items-center justify-between bg-slate-50/30">
                            <div class="flex items-center gap-4">
                                <i class="fa-solid fa-server text-red-400"></i>
                                <div class="flex flex-col">
                                    <span class="text-[12px] font-bold text-slate-700">NovaSync Cloud Node</span>
                                    <span class="text-[9px] text-slate-400 font-medium italic">Quebec Data Center [NV-42]</span>
                                </div>
                            </div>
                            <span class="text-[10px] font-black text-red-500 uppercase">Destruct</span>
                        </div>
                        <div class="p-5 border-b border-slate-50 flex items-center justify-between bg-slate-50/30">
                            <div class="flex items-center gap-4">
                                <i class="fa-solid fa-mobile-screen text-red-400"></i>
                                <div class="flex flex-col">
                                    <span class="text-[12px] font-bold text-slate-700">Hardware Attestation</span>
                                    <span class="text-[9px] text-slate-400 font-medium italic">Secure Enclave v4.0</span>
                                </div>
                            </div>
                            <span class="text-[10px] font-black text-red-500 uppercase">Revoke</span>
                        </div>
                        <div class="p-5 flex items-center justify-between bg-slate-50/30">
                            <div class="flex items-center gap-4">
                                <i class="fa-solid fa-key-skeleton text-red-400"></i>
                                <div class="flex flex-col">
                                    <span class="text-[12px] font-bold text-slate-700">RSA-4096 Keys</span>
                                    <span class="text-[9px] text-slate-400 font-medium italic">Master Private Key Hub</span>
                                </div>
                            </div>
                            <span class="text-[10px] font-black text-red-500 uppercase">Wipe</span>
                        </div>
                    </div>
                </div>

                <!-- Block 3: Security Metrics -->
                <div class="space-y-4">
                    <h3 class="text-[10px] font-extrabold text-slate-400 uppercase tracking-widest px-2">Encryption Entropy</h3>
                    <div class="bg-slate-900 rounded-[2.5rem] p-8 text-white relative overflow-hidden">
                        <div class="absolute top-0 right-0 p-6 opacity-10">
                            <i class="fa-solid fa-dna text-6xl"></i>
                        </div>
                        <div class="flex justify-between items-end mb-6">
                            <div>
                                <p class="text-[9px] font-bold uppercase tracking-widest text-slate-500">Current Entropy</p>
                                <p class="text-3xl font-black">99.99<span class="text-xs text-red-500">%</span></p>
                            </div>
                            <div class="text-right">
                                <p class="text-[9px] font-bold uppercase tracking-widest text-slate-500">Integrity</p>
                                <p class="text-lg font-bold text-green-400">SECURE</p>
                            </div>
                        </div>
                        <p class="text-[11px] text-slate-400 font-medium leading-relaxed">
                            System is currently under Hardware-Bound Protection. Only a level 5 authorization can break the kernel lock.
                        </p>
                    </div>
                </div>
            </div>

            <!-- Action Button -->
            <div class="pt-6">
                <button onclick="openLockdown()" class="w-full bg-red-600 text-white py-6 rounded-[2.5rem] font-black text-[14px] uppercase tracking-[0.2em] shadow-2xl shadow-red-200 active:scale-95 transition-all">
                    Initiate Purge
                </button>
                <p class="text-center text-[10px] text-slate-400 font-bold uppercase tracking-widest mt-8">Level 5 Clearance Verified</p>
            </div>
        </section>
    </div>

    <!-- PIN OVERLAY -->
    <div id="lockdown-overlay" class="overlay-base">
        <h2 class="text-xl font-black text-white mb-2">Nuclear Auth</h2>
        <p class="text-[10px] text-red-500 font-bold uppercase tracking-widest mb-12">Validation Protocol V5</p>
        <div class="flex gap-6 mb-16">
            <div class="pass-dot"></div><div class="pass-dot"></div><div class="pass-dot"></div><div class="pass-dot"></div>
        </div>
        <div class="grid grid-cols-3 gap-8 w-full max-w-[280px] mb-12">
            <button onclick="addPin('1')" class="key-btn">1</button><button onclick="addPin('2')" class="key-btn">2</button><button onclick="addPin('3')" class="key-btn">3</button>
            <button onclick="addPin('4')" class="key-btn">4</button><button onclick="addPin('5')" class="key-btn">5</button><button onclick="addPin('6')" class="key-btn">6</button>
            <button onclick="addPin('7')" class="key-btn">7</button><button onclick="addPin('8')" class="key-btn">8</button><button onclick="addPin('9')" class="key-btn">9</button>
            <div></div><button onclick="addPin('0')" class="key-btn">0</button><button onclick="delPin()" class="key-btn text-slate-300 border-none bg-transparent"><i class="fa-solid fa-delete-left"></i></button>
        </div>
        <button onclick="closeOverlay('lockdown-overlay')" class="text-[11px] font-bold text-slate-400 uppercase tracking-widest">Abort</button>
    </div>

    <!-- FINAL CONFIRM -->
    <div id="confirm-overlay" class="overlay-base">
        <div class="confirm-card">
            <i class="fa-solid fa-triangle-exclamation text-red-600 text-6xl mb-6"></i>
            <h2 class="text-2xl font-black text-slate-900 mb-2 leading-tight uppercase">Confirm<br>Destruction?</h2>
            <p class="text-[10px] text-slate-400 font-bold mb-10 tracking-widest uppercase">System Death Imminent</p>
            <div class="flex justify-center gap-10">
                <button onclick="runTheTerminal()" class="yn-btn btn-y">Y</button>
                <button onclick="location.reload()" class="yn-btn btn-n">N</button>
            </div>
        </div>
    </div>

    <script>
        const apiKey = "";
        let pin = "";
        let audioCtx;

        window.onload = () => { setTimeout(() => document.body.classList.add('loaded'), 850); };

        function initAudio() {
            if (!audioCtx) audioCtx = new (window.AudioContext || window.webkitAudioContext)();
            else if (audioCtx.state === 'suspended') audioCtx.resume();
        }

        function openLockdown() {
            openOverlay('lockdown-overlay');
        }

        function openOverlay(id) {
            const o = document.getElementById(id);
            document.body.classList.add('lock-scroll');
            o.style.display = 'flex';
            setTimeout(() => o.classList.add('active'), 10);
        }

        function closeOverlay(id) {
            const o = document.getElementById(id);
            o.classList.remove('active');
            document.body.classList.remove('lock-scroll');
            setTimeout(() => { o.style.display = 'none'; if(id==='lockdown-overlay'){ pin=""; updateDots(); } }, 500);
        }

        function addPin(d) {
            if (pin.length < 4) { 
                pin += d; updateDots(); 
                if (pin.length === 4) setTimeout(() => { 
                    document.getElementById('lockdown-overlay').classList.remove('active');
                    setTimeout(() => { 
                        document.getElementById('lockdown-overlay').style.display='none'; 
                        openOverlay('confirm-overlay'); 
                    }, 500);
                }, 300); 
            }
        }
        function delPin() { pin = pin.slice(0, -1); updateDots(); }
        function updateDots() {
            const ds = document.querySelectorAll('.pass-dot');
            ds.forEach((d, i) => i < pin.length ? d.classList.add('filled') : d.classList.remove('filled'));
        }

        function addLog(text, isCritical = false) {
            const output = document.getElementById('cli-output');
            const div = document.createElement('div');
            div.className = 'terminal-text' + (isCritical ? ' critical-line' : '');
            div.innerText = `[${new Date().toLocaleTimeString()}] ${text}`;
            output.appendChild(div);
            output.scrollTop = output.scrollHeight;
        }

        function playLoudSiren() {
            initAudio();
            const playOsc = () => {
                const osc = audioCtx.createOscillator();
                const gain = audioCtx.createGain();
                osc.type = 'sawtooth';
                osc.frequency.setValueAtTime(500, audioCtx.currentTime);
                osc.frequency.exponentialRampToValueAtTime(1400, audioCtx.currentTime + 0.3);
                osc.frequency.exponentialRampToValueAtTime(500, audioCtx.currentTime + 0.6);
                gain.gain.setValueAtTime(0.15, audioCtx.currentTime);
                gain.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.6);
                osc.connect(gain);
                gain.connect(audioCtx.destination);
                osc.start();
                osc.stop(audioCtx.currentTime + 0.6);
            };
            setInterval(playOsc, 650);
        }

        async function speakTheftAlert() {
            const payload = {
                contents: [{ parts: [{ text: "Theft Alert! Theft Alert! Master PIN validation failed. System kernel is now locked. Unauthorized account deletion suspended." }] }],
                generationConfig: {
                    responseModalities: ["AUDIO"],
                    speechConfig: { voiceConfig: { prebuiltVoiceConfig: { voiceName: "Fenrir" } } }
                }
            };
            try {
                const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });
                const result = await response.json();
                const base64 = result.candidates?.[0]?.content?.parts?.find(p => p.inlineData)?.inlineData?.data;
                if (base64) {
                    const pcm = Uint8Array.from(atob(base64), c => c.charCodeAt(0));
                    const wav = pcmToWavBlob(pcm, 24000);
                    const audio = new Audio(URL.createObjectURL(wav));
                    audio.play();
                }
            } catch(e) {}
        }

        function pcmToWavBlob(pcm, sampleRate) {
            const buffer = new ArrayBuffer(44 + pcm.length);
            const view = new DataView(buffer);
            const writeString = (o, s) => { for (let i = 0; i < s.length; i++) view.setUint8(o + i, s.charCodeAt(i)); };
            writeString(0, 'RIFF'); view.setUint32(4, 32 + pcm.length, true); writeString(8, 'WAVE');
            writeString(12, 'fmt '); view.setUint32(16, 16, true); view.setUint16(20, 1, true); view.setUint16(22, 1, true);
            view.setUint32(24, sampleRate, true); view.setUint32(28, sampleRate * 2, true); view.setUint16(32, 2, true);
            view.setUint16(34, 16, true); writeString(36, 'data'); view.setUint32(40, pcm.length, true);
            new Uint8Array(buffer, 44).set(pcm);
            return new Blob([view], { type: 'audio/wav' });
        }

        function runTheTerminal() {
            initAudio();
            document.getElementById('confirm-overlay').style.display = 'none';
            document.getElementById('terminal-layer').style.display = 'flex';
            
            let step = 0;
            const sequence = [
                () => addLog("INITIATING PROTOCOL ZERO..."),
                () => addLog("MOUNTING SECURE CORE..."),
                () => addLog("BYPASSING KERNEL_AUTH_DAEMON..."),
                () => addLog("PURGING RSA_PRIVATE_KEYS... [OK]"),
                () => addLog("WIPING TRANSACTION_LEDGER... 15%"),
                () => addLog("WIPING ACCOUNT_METADATA... 32%"),
                () => addLog("WIPING CRYPTO_VAULT... 42%"),
                () => addLog("CRITICAL_STALL: AUTH_FAILURE"),
                () => addLog("VALIDATING MASTER_PIN_OVERRIDE..."),
                () => addLog("ERROR: INVALID_PIN_AUTHORIZATION", true),
                () => addLog("SECURITY_BREACH DETECTED.", true),
                () => addLog("RETRYING WIPING CYCLE [1/9999]..."),
                () => addLog("ERROR: WRONG_PIN_ERROR", true),
                () => addLog("FORCING SYSTEM LOCKDOWN...", true),
            ];

            const interval = setInterval(() => {
                if (step < sequence.length) {
                    sequence[step]();
                    step++;
                } else {
                    clearInterval(interval);
                    setTimeout(() => {
                        document.getElementById('terminal-layer').style.display = 'none';
                        document.getElementById('alarm-layer').style.display = 'flex';
                        playLoudSiren();
                        speakTheftAlert();
                    }, 4000);
                }
            }, 800);
        }
    </script>
</body>
</html>